{% extends 'base_generic.html' %}
{% load static %}

{% block content %}
<div class="container mt-5">
    <h1 class="text-center">Booking Calendar</h1>

    <!-- FullCalendar -->
    <div id="calendar"></div>
</div>

<!-- FullCalendar JS and CSS -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@3.2.0/dist/fullcalendar.min.js"></script>
<link href="https://cdn.jsdelivr.net/npm/fullcalendar@3.2.0/dist/fullcalendar.min.css" rel="stylesheet">

<script>
    $(document).ready(function() {
        $('#calendar').fullCalendar({
            header: {
                left: 'prev,next today',
                center: 'title',
                right: 'month,agendaWeek,agendaDay'
            },
            defaultView: 'month', // Default view on larger screens
            events: [
                {% for event in events %}
                    {
                        title: '{{ event.title }}',
                        start: '{{ event.start }}',
                        end: '{{ event.end }}',
                        description: '{{ event.description }}'
                    },
                {% empty %}
                    // No bookings available
                {% endfor %}
            ],
            eventClick: function(event) {
                alert('Booking: ' + event.title + '\nFrom: ' + event.start.format() + '\nTo: ' + event.end.format());
            },
            // Make the calendar responsive
            windowResize: function(view) {
                if ($(window).width() < 768) {
                    $('#calendar').fullCalendar('changeView', 'agendaDay');
                } else {
                    $('#calendar').fullCalendar('changeView', 'month');
                }
            }
        });
    });
</script>
{% endblock %}
